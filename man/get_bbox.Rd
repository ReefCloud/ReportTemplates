% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/get_bbox.R
\name{get_bbox}
\alias{get_bbox}
\title{Get Cleaned Sites and a Buffered WGS84 Bounding Box for a Tier}
\usage{
get_bbox(
  tier_id,
  buffer_m = 10,
  drop_org_cols = TRUE,
  return_bbox_as = c("bbox", "list", "polygon")
)
}
\arguments{
\item{tier_id}{Character (or coercible). ReefCloud Tier ID.}

\item{buffer_m}{Numeric, non-negative. Buffer distance in meters around the sites'
convex hull before computing the bbox. Default \code{10} (meters).}

\item{drop_org_cols}{Logical. Drop \code{org_name} and \code{org_id} if present. Default \code{TRUE}.}

\item{return_bbox_as}{Character. One of:
\itemize{
\item \code{"bbox"} (default): returns an \code{sf} bbox object.
\item \code{"list"}: named list with \code{xmin,ymin,xmax,ymax}.
\item \code{"polygon"}: buffered hull as an \code{sf} polygon (WGS84).
}}
}
\value{
A list with:
\itemize{
\item \code{sites}: an \code{sf} object of cleaned sites including \code{lon}, \code{lat}
\item \code{bbox}: a bbox/list/polygon depending on \code{return_bbox_as}
}
}
\description{
Retrieves sites via \code{\link[=get_site_summary]{get_site_summary()}}, extracts longitude/latitude from geometry,
arranges and de-duplicates records, optionally drops organisation fields, and computes
a WGS84 (\code{EPSG:4326}) bounding box using a geodesic buffer.
}
\details{
\itemize{
\item If sites are not in WGS84, they are transformed to EPSG:4326 before any processing.
\item The function expands the bbox by \eqn{buffer_m / 111000} degrees.
\item To avoid zero-area bboxes for identical/near-identical site coordinates, a tiny
minimal expansion is applied when the hull area is zero.
}
}
\examples{
\dontrun{
# Basic: fetch, clean, and get a small buffered bbox
out <- get_clean_sites_and_bbox(tier_id = 1705, buffer_m = 10)
out$sites
out$bbox

# Supply a year to the underlying API:
out <- get_clean_sites_and_bbox(tier_id = "1705", buffer_m = 10,
                                return_bbox_as = "list")
out$bbox  # named list xmin/ymin/xmax/ymax
}

}
