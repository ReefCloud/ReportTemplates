% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/generate_map.R
\name{generate_map}
\alias{generate_map}
\title{Generate Tier Maps (Main, Inset, Region) in WGS84}
\usage{
generate_map(
  tier_id,
  buffer_m = 10000,
  boundary_level = 4,
  basemap_service = "carto",
  basemap_type = "light",
  out_dir = "figures",
  site_point_size = 3,
  site_point_color = "red",
  site_point_alpha = 0.5,
  boundary_line_color = "black",
  boundary_line_size = 3,
  inset_fill = "lightblue",
  boundary_fill = "red",
  boundary_alpha = 0.5,
  inset_pos = list(x = 0.88, y = 0.3, width = 0.25, height = 0.25)
)
}
\arguments{
\item{tier_id}{Character. ReefCloud Tier ID used to fetch regional summary, sites, and boundary.}

\item{buffer_m}{Numeric. Geodesic buffer distance in meters applied to the sites extent
prior to computing the tier \code{bbox}. Default \code{10000} (10 km).}

\item{boundary_level}{Integer. Tier level to request for the boundary via \code{getTiers()}.
Default \code{4}.}

\item{basemap_service}{Character. Basemap service for \code{basemaps::set_defaults()}, e.g., \code{"carto"}.
Default \code{"carto"}.}

\item{basemap_type}{Character. Basemap type for \code{basemaps::set_defaults()}, e.g., \code{"light"}.
Default \code{"light"}.}

\item{out_dir}{Character. Output directory to save PNGs. Default \code{"figures"}.}

\item{site_point_size}{Numeric. Point size for site markers. Default \code{3}.}

\item{site_point_color}{Character. Color for site markers. Default \code{"red"}.}

\item{site_point_alpha}{Numeric in \link{0,1}. Alpha for site markers. Default \code{0.5}.}

\item{boundary_line_color}{Character. Color for boundary outline. Default \code{"black"}.}

\item{boundary_line_size}{Numeric. Line width for boundary outline. Default \code{3}.}

\item{inset_fill}{Character. Fill color for country in the inset map. Default \code{"lightblue"}.}

\item{boundary_fill}{Character. Fill color for boundary polygon in inset/region maps. Default \code{"red"}.}

\item{boundary_alpha}{Numeric in \link{0,1}. Alpha for boundary fill in inset/region maps. Default \code{0.5}.}

\item{inset_pos}{Named list with \code{x, y, width, height} for positioning the inset on the main map.
Defaults to \code{list(x = 0.88, y = 0.3, width = 0.25, height = 0.25)}.}
}
\value{
Invisibly returns a list with \code{main_map}, \code{inset_map}, \code{region_map}, and
\code{combined_map} (all \code{ggplot} objects).
}
\description{
Builds a basemap-centered figure showing the tier boundary and site locations
with all geometries in WGS84 (\code{EPSG:4326}). Produces:
\itemize{
\item Main map (boundary + sites) with scale bar
\item Inset map (country extent + boundary highlight)
\item Region map (country + boundary highlight)
}
Saves PNGs to \code{figures/Site_Map.png} and \code{figures/Region_Map.png}.
}
\details{
\itemize{
\item All geometries are kept in WGS84 (\code{EPSG:4326}).
\item If \strong{\code{lwgeom}} is available, sites extent is buffered geodesically in meters using
\code{lwgeom::st_geod_buffer()} before computing the \code{bbox}. Otherwise, the function falls back
to a degree-based bbox expansion (conservative, approximate).
\item If country detection fails (\code{sites$site_country} missing or mismatched against Natural Earth),
inset/region maps fall back to the world extent.
\item Output PNGs are saved to \code{out_dir}. The directory is created if it does not exist.
}
}
\examples{
\dontrun{
generate_map("tier_id")                 # default settings, WGS84
generate_map("tier_id", buffer_m = 20000, basemap_type = "voyager")
}

}
